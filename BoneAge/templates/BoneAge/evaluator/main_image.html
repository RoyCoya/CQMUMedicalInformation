{% load static %}
{% load BoneAge_global_tags %}
<div class="col-6 border-end">
    <div class="d-flex justify-content-between col">
        <h3><i class="bi bi-person-bounding-box"></i> 患者信息</h3>
        <a href="#"><i class="bi bi-three-dots" style="font-size: 1.5em;"></i></a>
    </div>
    <div class="row">   
        <span class="col-6">
            <strong>姓名：</strong>
            <a id="patient_profile" href="{% url 'PatientManagement_profile' task.dcm_file.base_dcm.patient.id %}?back_page=BoneAge_evaluator&args={{task.id}}">
                {{patient.name}}
            </a>
        </span>
        <span class="col-6">
            <strong>性别：</strong>
            {{patient.get_sex_display}}
            {% if patient.sex == 'Female' %}
                <i class="bi bi-gender-female" style="color:DeepPink"></i>
            {% else %}
                <i class="bi bi-gender-male" style="color:DodgerBlue"></i>
            {% endif %}
        </span>
        <span class="col-6">
            <strong>历史记录：</strong>
            {% if historys > 0 %}
                {% if back_page %}
                    {% if back_page_get == 'PatientManagement_profile' %}
                        <a id="patient_historys" 
                            href="{{back_page}}"
                            class="bi bi-clock-history"> {{historys}}份</a>
                    {% else %}
                        <a id="patient_historys" 
                            href="{% url 'PatientManagement_profile' task.dcm_file.base_dcm.patient.id %}?info_tab=BoneAge&back_page=BoneAge_evaluator&args={{task.id}}&else_get=back_page%3D{{back_page_get}}{% for arg in back_page_args_get %}%26args%3D{{arg}}{% endfor %}%26else_get%3D{{back_page_else_get|transfercharacter_get_url}}"
                            class="bi bi-clock-history"> {{historys}}份</a>
                    {% endif %}
                {% else %}
                    <a id="patient_historys" 
                        href="{% url 'PatientManagement_profile' task.dcm_file.base_dcm.patient.id %}?info_tab=BoneAge&back_page=BoneAge_evaluator&args={{task.id}}"
                        class="bi bi-clock-history"> {{historys}}份</a>
                {% endif %}
                
            {% else %}
                无            
            {% endif %}
        </span>
        <span class="col-6"><strong>年龄：</strong>{{patient.birthday|get_dcm_age:dcm.base_dcm.Study_Date|floatformat}} 岁</span>
    </div>
</div>
<div class="col-6">
    <h3><i class="bi bi-image"></i> 图像调整</h3>
    <div class="row">
        <div class="btn-toolbar">
            <div class="btn-group me-2">
                <button id="setDragMode" class="btn btn-outline-primary bi bi-arrows-move" type="button" title="放大"></button>
                <button id="zoomIn" class="btn btn-outline-primary bi bi-zoom-in" type="button" title="放大"></button>
                <button id="zoomOut" class="btn btn-outline-primary bi bi-zoom-out" type="button" title="缩小"></button>
                <button id="resetCropper" class="btn btn-outline-primary bi bi-arrow-counterclockwise" type="button" title="还原"></button>
            </div>
            <div class="btn-group me-2">
                <button id="brightness_down" class="btn btn-outline-primary bi bi-brightness-low" type="button" title="降低亮度"></button>
                <button id="brightness_up" class="btn btn-outline-primary bi bi-brightness-high" type="button" title="提高亮度"></button>
                <button id="contrast_down" class="btn btn-outline-primary bi bi-circle" type="button" title="降低对比度"></button>
                <button id="contrast_up" class="btn btn-outline-primary bi bi-circle-half" type="button" title="提高对比度"></button>
            </div>
            <a id="save_offset" href="#" class="btn btn-primary invisible">保存</a>
        </div>
    </div>
</div>
<div class="col-12 text-center bg-secondary mt-2" style="padding:0px; height:80vh;">
    <img id="dcm" src="/userfile/{{dcm.base_dcm.dcm_to_image}}" style="max-width: 100%; height:auto">
</div>
