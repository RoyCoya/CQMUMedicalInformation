{% extends 'BoneAge/base.html' %}
{% load static %}
{% load public %}

{% block title_BoneAge %}
    {% block title_BoneAge_index %}主页{% endblock title_BoneAge_index %}｜{{ user.username }}
{% endblock title_BoneAge %}

{% block nav_BoneAge_index %}active{% endblock nav_BoneAge_index %}

{% block css_BoneAge %}
<link rel="stylesheet" href="{% static '/BoneAge/css/index.css' %}">
{% endblock css_BoneAge %}

{% block content_BoneAge %}
<!-- 欢迎栏、个人设置按钮 -->
<div class="alert alert-primary d-flex justify-content-between" role="alert">
    <span>{{ user.last_name|time_period_alert }}。欢迎使用骨龄评分系统。</span>
    <a data-bs-toggle="offcanvas" href="#account_settings">个人设置 <i class="bi bi-gear"></i></a>
</div>

<div class="row">
    <!-- 未完成评测任务表 -->
    <div class="col-9 border-end ps-5 pe-5">
        {% block task %}
            {% include 'BoneAge/index/tasks/tasks.html' with tasks_finished=False %}
        {% endblock task %}
    </div>
    <!-- 面板 -->
    <div class="col-3">
        {% block pannel %}
            {% include 'BoneAge/index/pannel.html' with is_finished=True %}
        {% endblock pannel %}
    </div>
</div>
{% include 'BoneAge/preference/preference.html' %}
{% endblock content_BoneAge %}

{% block js_BoneAge %}
<script>
    var tooltipTriggerList = Array.prototype.slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    })
    var standard = "{{ standard }}"
    var order = {{order}}
    var is_descend = {{is_descend}}
    var page_number = {{page_number}}
    var page_count = {{page_count}}
    var tasks_finished = {% block is_task_finished %}false{% endblock is_task_finished %}
    var preference_shortcut = {% if preference.shortcut %}true{% else %}false{% endif %}
</script>
<script src="{% static 'BoneAge/js/index/index.js' %}"></script>
{% include "BoneAge/preference/preference_js.html" %}
{% endblock js_BoneAge %}